<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0b1524">
<title>Professional Quotation ‚Äî Abdullah Hussain Hazazy</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --navy:        #0b1524;
  --navy-mid:    #162035;
  --navy-soft:   #1f2f48;
  --gold:        #c8974a;
  --gold-light:  #e4b96e;
  --smoke:       #f2ede6;
  --parchment:   #faf7f2;
  --ink:         #12213a;
  --ink-mid:     #3a4f6e;
  --ink-soft:    #6b82a0;
  --border:      #ddd5c4;
  --white:       #ffffff;
  --green:       #2e7d5e;
  --radius:      14px;
  --sb:          #2b3a8f;
  --sb-light:    #dde0f5;
  --sb-mid:      #5a68c0;
  --sb-dark:     #1a2566;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Outfit', sans-serif;
  background: var(--smoke);
  color: var(--ink);
  min-height: 100vh;
  padding: 36px 20px 60px;
  background-image:
    radial-gradient(ellipse 80% 50% at 50% -10%, rgba(200,151,74,0.06), transparent),
    url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c8974a' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.page-wrapper { max-width: 1120px; margin: 0 auto; }

/* ‚îÄ‚îÄ LOGIN ‚îÄ‚îÄ */
#login-screen { position:fixed; inset:0; background:var(--navy); background-image:radial-gradient(ellipse 70% 60% at 50% 0%, rgba(200,151,74,0.08), transparent); display:flex; align-items:center; justify-content:center; z-index:9999; transition:opacity .5s ease,transform .5s ease; }
#login-screen.hide { opacity:0; transform:scale(1.04); pointer-events:none; }
.login-card { background:rgba(255,255,255,0.04); border:1px solid rgba(200,151,74,0.25); border-radius:20px; padding:52px 48px 44px; width:100%; max-width:420px; backdrop-filter:blur(12px); box-shadow:0 0 0 1px rgba(200,151,74,0.1),0 32px 80px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.06); animation:loginRise .7s cubic-bezier(.22,1,.36,1) both; }
@keyframes loginRise { from{opacity:0;transform:translateY(30px) scale(.97)} to{opacity:1;transform:translateY(0) scale(1)} }
.login-logo { text-align:center; margin-bottom:36px; }
.login-diamond-row { display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:16px; }
.login-d-line { width:50px; height:1px; background:linear-gradient(90deg,transparent,rgba(200,151,74,0.6)); }
.login-d-line-r { background:linear-gradient(90deg,rgba(200,151,74,0.6),transparent); }
.login-d-icon { width:8px; height:8px; background:var(--gold); transform:rotate(45deg); box-shadow:0 0 10px rgba(200,151,74,0.5); }
.login-company { font-family:'Cormorant Garamond',serif; font-size:22px; font-weight:700; color:var(--gold-light); letter-spacing:.02em; line-height:1.25; }
.login-company-ar { font-family:'Segoe UI',Tahoma,Arial,sans-serif; font-size:14px; color:rgba(200,151,74,0.6); direction:rtl; margin-top:4px; }
.login-subtitle { font-size:12px; color:rgba(255,255,255,0.35); margin-top:10px; letter-spacing:.08em; text-transform:uppercase; font-weight:500; }
.login-field-wrap { margin-bottom:16px; }
.login-label { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--gold); margin-bottom:8px; display:block; }
.login-input { width:100%; padding:13px 16px; background:rgba(255,255,255,0.06); border:1px solid rgba(200,151,74,0.2); border-radius:10px; font-family:'Outfit',sans-serif; font-size:14px; color:#fff; transition:all .2s; outline:none; }
.login-input::placeholder { color:rgba(255,255,255,0.25); }
.login-input:focus { border-color:var(--gold); background:rgba(200,151,74,0.07); box-shadow:0 0 0 3px rgba(200,151,74,0.12); }
.login-btn { width:100%; padding:14px; margin-top:8px; background:linear-gradient(135deg,#c8974a 0%,#e4b96e 50%,#c8974a 100%); background-size:200% 100%; color:#fff; border:none; border-radius:10px; font-family:'Outfit',sans-serif; font-size:14px; font-weight:700; letter-spacing:.06em; cursor:pointer; transition:all .25s cubic-bezier(.34,1.56,.64,1); box-shadow:0 4px 20px rgba(200,151,74,0.3); }
.login-btn:hover { background-position:100% 0; transform:translateY(-2px); box-shadow:0 8px 28px rgba(200,151,74,0.45); }
.login-error { background:rgba(224,82,82,0.12); border:1px solid rgba(224,82,82,0.3); color:#ff9090; font-size:12.5px; padding:10px 14px; border-radius:8px; margin-bottom:14px; text-align:center; display:none; animation:shake .35s ease; }
.login-error.show { display:block; }
@keyframes shake { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-6px)} 40%{transform:translateX(6px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} }
.login-footer-text { text-align:center; font-size:11px; color:rgba(255,255,255,0.2); margin-top:24px; letter-spacing:.04em; }

#app { display:none; }
.btn-short { display:none; }
.btn-full  { display:inline; }
.toolbar { display:flex; justify-content:flex-end; gap:10px; margin-bottom:22px; flex-wrap:wrap; animation:floatDown .5s ease both; }
@keyframes floatDown { from{opacity:0;transform:translateY(-12px)} to{opacity:1;transform:translateY(0)} }
.btn { font-family:'Outfit',sans-serif; font-size:13px; font-weight:600; padding:10px 22px; border-radius:8px; border:none; cursor:pointer; letter-spacing:.04em; transition:all .22s cubic-bezier(.34,1.56,.64,1); position:relative; overflow:hidden; display:inline-flex; align-items:center; gap:7px; }
.btn::after { content:''; position:absolute; inset:0; background:rgba(255,255,255,0.12); opacity:0; transition:opacity .2s; }
.btn:hover::after { opacity:1; }
.btn-gold { background:linear-gradient(135deg,#c8974a 0%,#e4b96e 50%,#c8974a 100%); background-size:200% 100%; color:#fff; box-shadow:0 4px 16px rgba(200,151,74,0.35); }
.btn-gold:hover { background-position:100% 0; transform:translateY(-2px); box-shadow:0 8px 24px rgba(200,151,74,0.45); }
.btn-gold:disabled { opacity:.7; cursor:not-allowed; transform:none !important; }
.btn-ghost { background:rgba(255,255,255,0.7); color:var(--ink-mid); border:1.5px solid var(--border); backdrop-filter:blur(8px); }
.btn-ghost:hover { border-color:var(--gold); color:var(--gold); transform:translateY(-2px); box-shadow:0 4px 12px rgba(200,151,74,0.15); }
/* ‚îÄ‚îÄ SHARE BUTTON & DROPDOWN ‚îÄ‚îÄ */
.btn-share { background:linear-gradient(135deg,#1a8a5a 0%,#22b572 50%,#1a8a5a 100%); background-size:200% 100%; color:#fff; box-shadow:0 4px 16px rgba(26,138,90,0.35); }
.btn-share:hover { background-position:100% 0; transform:translateY(-2px); box-shadow:0 8px 24px rgba(26,138,90,0.45); }
/* Menu is appended to body ‚Äî position:fixed avoids all stacking-context traps */
#share-menu-global { display:none; position:absolute; background:#fff; border:1px solid #ddd5c4; border-radius:12px; box-shadow:0 16px 48px rgba(11,21,36,0.22),0 2px 8px rgba(11,21,36,0.10); min-width:220px; z-index:99999; overflow:hidden; }
@keyframes menuPop { from{opacity:0;transform:translateY(-6px) scale(.97)} to{opacity:1;transform:translateY(0) scale(1)} }
#share-menu-global.open { display:block; animation:menuPop .18s cubic-bezier(.34,1.56,.64,1) both; }
.share-menu-header { padding:9px 14px 7px; font-size:8.5px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:#c8974a; border-bottom:1px solid #ddd5c4; }
.share-item { display:flex; align-items:center; gap:11px; padding:11px 16px; font-size:13px; font-weight:500; color:#12213a; cursor:pointer; transition:background .15s; border:none; background:none; width:100%; font-family:'Outfit',sans-serif; text-align:left; }
.share-item:hover { background:rgba(200,151,74,0.08); color:#c8974a; }
.share-item:hover .share-icon { transform:scale(1.15); }
.share-icon { width:32px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:16px; flex-shrink:0; transition:transform .2s; }
.si-wa  { background:#dcf8c6; }
.si-em  { background:#ddeeff; }
.si-sms { background:#e8e0ff; }
.si-copy{ background:#fff3e0; }
.si-more{ background:#f0f0f0; }
.share-item-label { display:flex; flex-direction:column; gap:1px; }
.share-item-sub { font-size:10px; color:#6b82a0; font-weight:400; }
.share-copied { font-size:11px; color:#2e7d5e; font-weight:600; display:none; padding:6px 16px 8px; text-align:center; border-top:1px solid #ddd5c4; }
.share-copied.show { display:block; }
.btn-spinner { width:14px; height:14px; border:2px solid rgba(255,255,255,0.35); border-top-color:#fff; border-radius:50%; animation:spin .7s linear infinite; flex-shrink:0; }
@keyframes spin { to{transform:rotate(360deg)} }

.card { background:var(--white); border-radius:var(--radius); overflow:hidden; box-shadow:0 0 0 1px rgba(200,151,74,0.15),0 4px 8px rgba(11,21,36,0.04),0 24px 60px rgba(11,21,36,0.10); animation:riseUp .65s cubic-bezier(.22,1,.36,1) both; animation-delay:.1s; }
@keyframes riseUp { from{opacity:0;transform:translateY(28px) scale(.99)} to{opacity:1;transform:translateY(0) scale(1)} }

/* HEADER */
.doc-header { background:var(--navy); padding:0; position:relative; overflow:hidden; }
.doc-header::before { content:''; position:absolute; top:-60px; right:-60px; width:320px; height:320px; border-radius:50%; border:60px solid rgba(200,151,74,0.06); pointer-events:none; }
.doc-header::after  { content:''; position:absolute; bottom:-40px; left:40%; width:200px; height:200px; border-radius:50%; border:40px solid rgba(200,151,74,0.04); pointer-events:none; }
.header-stripe { height:3px; background:linear-gradient(90deg,transparent 0%,var(--gold) 20%,var(--gold-light) 50%,var(--gold) 80%,transparent 100%); }
.header-inner { display:grid; grid-template-columns:1fr auto 1fr; gap:12px; padding:12px 24px 10px; align-items:center; position:relative; z-index:1; }
.co-left  { display:flex; flex-direction:column; gap:3px; }
.co-right { display:flex; flex-direction:column; gap:3px; text-align:right; direction:rtl; }
.co-name-en { font-family:'Cormorant Garamond',serif; font-size:16px; font-weight:700; color:var(--gold-light); letter-spacing:.01em; line-height:1.2; white-space:nowrap; }
.co-sub-en  { font-family:'Cormorant Garamond',serif; font-size:11px; font-style:italic; color:rgba(200,151,74,0.65); }
.co-detail  { font-size:9.5px; line-height:1.6; color:rgba(255,255,255,0.55); font-weight:300; margin-top:1px; }
.co-detail span { display:block; }
.co-name-ar { font-family:'Segoe UI',Tahoma,Arial,sans-serif; font-size:14px; font-weight:700; color:var(--gold-light); line-height:1.3; white-space:nowrap; }
.co-sub-ar  { font-family:'Segoe UI',Tahoma,Arial,sans-serif; font-size:10px; color:rgba(200,151,74,0.65); line-height:1.4; }
.co-detail-ar { font-size:9.5px; line-height:1.6; color:rgba(255,255,255,0.55); font-weight:300; font-family:'Segoe UI',Tahoma,Arial,sans-serif; margin-top:1px; }
.co-detail-ar span { display:block; }
.title-center { text-align:center; }
.diamond-deco { display:flex; align-items:center; justify-content:center; gap:6px; margin-bottom:4px; }
.diamond-line { width:28px; height:1px; background:linear-gradient(90deg,transparent,var(--gold)); }
.diamond-line.right { background:linear-gradient(90deg,var(--gold),transparent); }
.diamond-icon { width:6px; height:6px; background:var(--gold); transform:rotate(45deg); box-shadow:0 0 6px rgba(200,151,74,0.6); }
.doc-title-main { font-family:'Cormorant Garamond',serif; font-size:26px; font-weight:700; color:var(--white); letter-spacing:.14em; line-height:1; }
.doc-title-ar { font-family:'Segoe UI',Tahoma,Arial,sans-serif; font-size:12px; font-weight:400; color:rgba(255,255,255,0.6); direction:rtl; margin-top:3px; }

/* META */
.meta-bar { display:grid; grid-template-columns:repeat(4,1fr); border-bottom:1px solid var(--border); background:var(--parchment); }
.meta-item { padding:10px 16px; border-right:1px solid var(--border); position:relative; }
.meta-item:last-child { border-right:none; }
.meta-item::before { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:var(--gold); transform:scaleX(0); transition:transform .25s; transform-origin:left; }
.meta-item:focus-within::before { transform:scaleX(1); }
.meta-label { font-size:8.5px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--gold); margin-bottom:3px; }
.meta-value { font-family:'Outfit',sans-serif; font-size:12px; font-weight:500; color:var(--ink); border:none; background:transparent; width:100%; padding:1px 0; }
.meta-value:focus { outline:none; }

/* CLIENT */
.client-section { display:grid; grid-template-columns:1fr 1fr; border-bottom:1px solid var(--border); }
.client-box { padding:8px 18px; border-right:1px solid var(--border); }
.client-box:last-child { border-right:none; }
.section-label { display:flex; align-items:center; gap:6px; font-size:8.5px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--gold); margin-bottom:6px; }
.section-label::before { content:''; display:inline-block; width:14px; height:2px; background:var(--gold); border-radius:2px; }
.ef { display:block; font-family:'Outfit',sans-serif; font-size:12px; color:var(--ink); border:none; background:transparent; width:100%; padding:2px 0; border-bottom:1px solid transparent; transition:border-color .2s; line-height:1.45; }
.ef:focus { outline:none; border-bottom-color:rgba(200,151,74,0.4); }
.ef::placeholder { color:rgba(107,130,160,0.5); }
.ef-lg { font-size:13px; font-weight:600; margin-bottom:1px; }

/* TABLE */
.table-section { padding:14px 20px 10px; }
.table-scroll { overflow-x:auto; border-radius:8px; border:1px solid var(--border); }
table { width:100%; border-collapse:collapse; font-size:11.5px; table-layout:fixed; }
thead tr { background:var(--navy-soft); }
thead th { padding:9px 6px; text-align:left; font-size:8px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:rgba(255,255,255,0.75); white-space:nowrap; overflow:hidden; }
thead th:last-child { text-align:right; }
thead th:first-child { color:var(--gold); text-align:center; }
tbody tr { border-bottom:1px solid var(--border); transition:background .18s; animation:slideIn .28s ease both; }
@keyframes slideIn { from{opacity:0;transform:translateX(-6px)} to{opacity:1;transform:translateX(0)} }
tbody tr:last-child { border-bottom:none; }
tbody tr:hover { background:rgba(200,151,74,0.04); }
tbody td { padding:6px 6px; vertical-align:middle; }
.ci { font-family:'Outfit',sans-serif; font-size:11px; border:none; background:transparent; width:100%; color:var(--ink); padding:2px 2px; border-radius:4px; transition:background .15s; }
.ci:focus { outline:none; background:rgba(200,151,74,0.07); }
.ci::placeholder { color:rgba(107,130,160,0.4); }
.ci-r { text-align:right; }
.sno { text-align:center; font-weight:700; font-size:11px; color:var(--gold); }
.amt-val { text-align:right; font-weight:500; white-space:nowrap; color:var(--ink-mid); }
.vat-val { text-align:right; font-weight:500; white-space:nowrap; color:var(--ink-soft); }
.tot-val { text-align:right; font-weight:700; white-space:nowrap; color:var(--green); }
.del-btn { background:none; border:none; cursor:pointer; color:#e05252; font-size:11px; opacity:0; transition:opacity .18s,transform .18s; padding:3px 5px; border-radius:4px; }
tbody tr:hover .del-btn { opacity:1; }
.del-btn:hover { transform:scale(1.2); background:rgba(224,82,82,0.08); }
.add-row-btn { display:flex; align-items:center; justify-content:center; gap:8px; margin-top:8px; padding:8px 16px; font-family:'Outfit',sans-serif; font-size:12px; font-weight:600; color:var(--gold); background:linear-gradient(135deg,rgba(200,151,74,0.06),rgba(200,151,74,0.10)); border:1.5px dashed rgba(200,151,74,0.4); border-radius:7px; cursor:pointer; width:100%; transition:all .22s; letter-spacing:.03em; }
.add-row-btn:hover { background:rgba(200,151,74,0.13); border-color:var(--gold); transform:translateY(-1px); box-shadow:0 4px 12px rgba(200,151,74,0.12); }

/* SUMMARY */
.summary-section { display:grid; grid-template-columns:1fr auto 280px; gap:16px; padding:14px 20px 16px; border-top:1px solid var(--border); background:var(--parchment); align-items:start; }
.notes-label { font-size:8.5px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--gold); margin-bottom:7px; display:flex; align-items:center; gap:6px; }
.notes-label::before { content:''; display:inline-block; width:14px; height:2px; background:var(--gold); border-radius:2px; }
.notes-area { font-family:'Outfit',sans-serif; font-size:11.5px; color:var(--ink-mid); resize:vertical; border:1px solid var(--border); border-radius:7px; padding:9px 11px; width:100%; min-height:75px; background:var(--white); transition:border-color .2s,box-shadow .2s; line-height:1.55; }
.notes-area:focus { outline:none; border-color:rgba(200,151,74,0.5); box-shadow:0 0 0 3px rgba(200,151,74,0.08); }
.totals-wrap { display:flex; flex-direction:column; }
.totals-label { font-size:8.5px; font-weight:700; text-transform:uppercase; letter-spacing:.12em; color:var(--gold); margin-bottom:7px; display:flex; align-items:center; gap:6px; }
.totals-label::before { content:''; display:inline-block; width:14px; height:2px; background:var(--gold); border-radius:2px; }
.totals-box { border-radius:8px; border:1px solid var(--border); overflow:hidden; background:var(--white); box-shadow:0 2px 12px rgba(11,21,36,0.05); }
.t-row { display:flex; justify-content:space-between; align-items:center; padding:9px 14px; border-bottom:1px solid var(--border); font-size:12px; transition:background .15s; }
.t-row:last-child { border-bottom:none; }
.t-row:hover { background:rgba(200,151,74,0.03); }
.t-label { color:var(--ink-soft); font-weight:400; }
.t-value { font-weight:600; color:var(--ink); }
.vat-tag { display:inline-block; background:rgba(200,151,74,0.12); color:var(--gold); font-size:8.5px; font-weight:700; padding:1px 6px; border-radius:20px; margin-left:5px; letter-spacing:.06em; }
.t-row.grand { background:linear-gradient(135deg,var(--navy) 0%,var(--navy-mid) 100%); padding:14px 16px; position:relative; overflow:hidden; display:flex; justify-content:space-between; align-items:center; gap:10px; }
.t-row.grand::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,transparent,var(--gold),transparent); }
.grand-left { display:flex; flex-direction:column; gap:3px; }
.grand-label { font-size:9px; font-weight:700; color:rgba(255,255,255,0.85); text-transform:uppercase; letter-spacing:.12em; }
.grand-sublabel { font-size:8.5px; color:rgba(255,255,255,0.3); letter-spacing:.03em; }
.grand-right { text-align:right; }
.grand-num-wrap { display:flex; align-items:flex-end; gap:4px; justify-content:flex-end; }
.grand-cur { font-family:'Outfit',sans-serif; font-size:10px; font-weight:500; color:rgba(200,151,74,0.65); letter-spacing:.10em; padding-bottom:4px; }
.grand-num { font-family:'Outfit',sans-serif; font-size:26px; font-weight:700; color:#e4b96e; letter-spacing:.02em; line-height:1; font-variant-numeric:tabular-nums; }

/* SQUARE STAMP */
.stamp-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding-top: 4px;
}
.sq-stamp {
  width: 130px;
  height: 130px;
  border: 3px solid rgba(26,37,102,0.92);
  border-radius: 5px;
  position: relative;
  background: #f5f4ef;
  font-family: Arial, Helvetica, sans-serif;
  color: var(--sb-dark);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 0 0 1px rgba(26,37,102,0.3),inset 0 0 14px rgba(26,37,102,0.09),2px 3px 0 0 rgba(26,37,102,0.2),0 1px 10px rgba(26,37,102,0.2);
  filter: contrast(1.06) saturate(0.92);
  transition: transform .3s ease, box-shadow .3s ease, filter .3s ease;
  cursor: default;
}
.sq-stamp:hover { transform: scale(1.05) rotate(-1.5deg); filter: contrast(1.09) saturate(1); }
.sq-stamp::before,.sq-stamp::after { content: ''; position: absolute; width: 10px; height: 10px; border-color: rgba(26,37,102,0.88); border-style: solid; z-index: 10; }
.sq-stamp::before { top: 6px; left: 6px; border-width: 2px 0 0 2px; }
.sq-stamp::after { bottom: 6px; right: 6px; border-width: 0 2px 2px 0; }
.sq-corner-tr, .sq-corner-bl { position: absolute; width: 10px; height: 10px; border-color: rgba(26,37,102,0.88); border-style: solid; z-index: 10; }
.sq-corner-tr { top: 6px; right: 6px; border-width: 2px 2px 0 0; }
.sq-corner-bl { bottom: 6px; left: 6px; border-width: 0 0 2px 2px; }
.sq-top { background: rgba(26,37,102,0.93); color: #e8ebff; text-align: center; padding: 5px 8px 4px; font-size: 7.5px; font-weight: 900; letter-spacing: 2.5px; text-transform: uppercase; flex-shrink: 0; text-shadow: 0 1px 2px rgba(5,10,50,0.4); }
.sq-name { text-align: center; padding: 5px 8px 4px; font-size: 7.5px; font-weight: 800; letter-spacing: 1.4px; text-transform: uppercase; line-height: 1.45; color: #1a2566; flex-shrink: 0; }
.sq-div { height: 1.5px; background: rgba(26,37,102,0.65); margin: 0 10px; flex-shrink: 0; }
.sq-trading { flex: 1; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 900; letter-spacing: 3.5px; color: #1a2566; text-transform: uppercase; text-shadow: 0 1px 4px rgba(26,37,102,0.18); }
.sq-cr { text-align: center; padding: 4px 8px 5px; font-size: 7.5px; font-weight: 700; letter-spacing: 1.5px; color: #1a2566; border-top: 1.5px solid rgba(26,37,102,0.6); flex-shrink: 0; }
.sig-row { display:flex; align-items:center; gap:5px; width:160px; }
.sig-row span { flex:1; height:1px; background:linear-gradient(90deg,transparent,var(--border)); }
.sig-row span.r { background:linear-gradient(90deg,var(--border),transparent); }
.sig-diamond { width:6px; height:6px; background:var(--gold); transform:rotate(45deg); }
.sig-label { font-size:10px; color:var(--ink-soft); letter-spacing:.1em; text-transform:uppercase; font-weight:600; text-align:center; }
.stamp-wrap { display: flex; flex-direction: column; align-items: center; gap: 0; padding-top: 4px; }
.sig-svg { width: 160px; height: 70px; display: block; }
.sig-label-row { display: flex; align-items: center; gap: 6px; width: 200px; margin-top: 6px; }
.sig-label-row span { flex:1; height:1px; background: linear-gradient(90deg,transparent,#ddd5c4); }
.sig-label-row span.r { background: linear-gradient(90deg,#ddd5c4,transparent); }
.sig-label-diamond { width:5px; height:5px; background:var(--gold); transform:rotate(45deg); flex-shrink:0; }
.sig-auth-label { font-size: 9px; color: var(--ink-soft); letter-spacing: .12em; text-transform: uppercase; font-weight: 700; text-align: center; margin-top: 4px; }

/* Amount in Words */
.words-bar { display: flex; align-items: baseline; gap: 8px; padding: 7px 20px; background: var(--parchment); border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
.words-bar-label { font-size: 9.5px; font-weight: 700; text-transform: uppercase; letter-spacing: .12em; color: var(--gold); white-space: nowrap; flex-shrink: 0; }
.words-bar-value { font-size: 13px; color: var(--ink); font-style: italic; font-weight: 500; line-height: 1.4; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PRINT & PDF ‚Äî A4 tight fit, all columns
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media print {
  * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; }
  @page { size: A4 portrait; margin: 8mm 8mm 8mm 8mm; }

  body { background: white !important; padding: 0 !important; margin: 0 !important; font-size: 9pt !important; }
  .toolbar, .add-row-btn, .del-btn, .no-pdf { display: none !important; }
  #app { display: block !important; }
  .page-wrapper { max-width: 100% !important; padding: 0 !important; margin: 0 !important; }
  .card { box-shadow: none !important; border-radius: 0 !important; border: none !important; width: 100% !important; }

  /* Header compact */
  .header-inner { padding: 8px 14px 7px !important; gap: 8px !important; }
  .doc-title-main { font-size: 20px !important; }
  .doc-title-ar { font-size: 10px !important; }
  .co-name-en { font-size: 13px !important; }
  .co-name-ar { font-size: 12px !important; }
  .co-detail, .co-detail-ar { font-size: 8px !important; line-height: 1.5 !important; }
  .header-stripe { height: 2px !important; }

  /* Meta bar */
  .meta-bar { background: var(--parchment) !important; }
  .meta-item { padding: 6px 10px !important; }
  .meta-label { font-size: 7px !important; }
  .meta-value { font-size: 10px !important; }

  /* Client section */
  .client-box { padding: 6px 12px !important; }
  .ef { font-size: 10px !important; padding: 1px 0 !important; }
  .ef-lg { font-size: 11px !important; }
  .section-label { font-size: 7px !important; margin-bottom: 4px !important; }

  /* Table ‚Äî fixed layout squeezed to fit A4 */
  .table-section { padding: 8px 10px 6px !important; }
  .table-scroll { overflow: visible !important; border-radius: 4px !important; }
  table {
    table-layout: fixed !important;
    width: 100% !important;
    font-size: 8.5pt !important;
    border-collapse: collapse !important;
  }
  /* Column widths ‚Äî total must = 100% */
  col.c-no   { width: 4% !important; }
  col.c-prod { width: 11% !important; }
  col.c-desc { width: 28% !important; }
  col.c-unit { width: 6% !important; }
  col.c-qty  { width: 7% !important; }
  col.c-rate { width: 11% !important; }
  col.c-amt  { width: 11% !important; }
  col.c-vat  { width: 11% !important; }
  col.c-tot  { width: 11% !important; }

  thead th {
    padding: 6px 4px !important;
    font-size: 7pt !important;
    letter-spacing: 0.04em !important;
    white-space: normal !important;
    line-height: 1.2 !important;
    word-break: break-word !important;
  }
  tbody td {
    padding: 5px 4px !important;
    font-size: 8.5pt !important;
    vertical-align: middle !important;
    word-break: break-word !important;
  }
  .ci { font-size: 8.5pt !important; }
  .sno { font-size: 8pt !important; }

  /* Summary section */
  .summary-section {
    grid-template-columns: 1fr auto 240px !important;
    padding: 10px 14px 12px !important;
    gap: 12px !important;
  }
  .notes-area { font-size: 9pt !important; min-height: 55px !important; padding: 6px 8px !important; }
  .notes-label, .totals-label { font-size: 7px !important; margin-bottom: 5px !important; }

  /* Totals */
  .totals-box { box-shadow: none !important; }
  .t-row { padding: 7px 10px !important; font-size: 10pt !important; }
  .grand-num { font-size: 20px !important; }
  .grand-label { font-size: 8px !important; }
  .grand-sublabel { font-size: 7px !important; }
  .vat-tag { font-size: 7px !important; }

  /* Stamp / signature */
  .stamp-wrap { gap: 4px !important; padding-top: 2px !important; }
  .sig-svg { width: 130px !important; height: 56px !important; }
  .sq-stamp { width: 110px !important; height: 110px !important; }

  /* Words bar */
  .words-bar { padding: 5px 14px !important; }
  .words-bar-label { font-size: 8px !important; }
  .words-bar-value { font-size: 10pt !important; }
}

/* TABLET */
@media (max-width:900px) {
  .header-inner { padding:32px 28px 28px; gap:18px; }
  .table-section { padding:20px 16px 14px; }
  .summary-section { padding:20px 20px 24px; gap:20px; }
  .client-box { padding:12px 18px; }
}

/* MOBILE */
@media (max-width:640px) {
  input,textarea,select { font-size:16px !important; }
  .btn-short { display:inline; }
  .btn-full  { display:none; }
  body { padding:0 0 80px; }
  #login-screen { align-items:flex-end; padding-bottom:0; }
  .login-card { border-radius:24px 24px 0 0; padding:36px 24px 40px; max-width:100%; border-bottom:none; }
  .login-input { padding:15px 16px; font-size:16px !important; }
  .login-btn { padding:16px; font-size:15px; min-height:52px; }
  #app .page-wrapper { padding:0; }
  .toolbar { position:sticky; top:0; z-index:100; background:rgba(242,237,230,0.95); backdrop-filter:blur(10px); margin-bottom:0; padding:10px 12px; border-bottom:1px solid var(--border); justify-content:stretch; gap:8px; flex-wrap:nowrap; }
  .btn { flex:1; padding:10px 8px; font-size:11.5px; min-height:42px; border-radius:8px; white-space:nowrap; }
  .card { border-radius:0; box-shadow:none; border:none; border-top:1px solid var(--border); }
  .header-inner { grid-template-columns:1fr; padding:16px 20px 14px; gap:0; text-align:center; }
  .title-center { order:0; margin-bottom:12px; }
  .doc-title-main { font-size:26px; }
  .co-left { order:1; align-items:center; text-align:center; gap:4px; }
  .co-right { order:2; align-items:center; text-align:center; direction:ltr; gap:4px; margin-top:12px; padding-top:12px; border-top:1px solid rgba(200,151,74,0.15); }
  .co-name-en { white-space:normal; }
  .meta-bar { grid-template-columns:1fr 1fr; }
  .meta-item { padding:14px 16px; }
  .meta-item:nth-child(2) { border-right:none; }
  .meta-item:nth-child(3) { border-top:1px solid var(--border); }
  .meta-item:nth-child(4) { border-right:none; border-top:1px solid var(--border); }
  .client-section { grid-template-columns:1fr; }
  .client-box { border-right:none; border-bottom:1px solid var(--border); padding:10px 14px; }
  .client-box:last-child { border-bottom:none; }
  .ef { font-size:16px !important; padding:8px 0; }
  .table-section { padding:16px 12px 12px; }
  thead th { padding:10px 8px; font-size:9px; }
  tbody td { padding:8px; }
  .ci { font-size:16px !important; min-width:60px; }
  .del-btn { opacity:1 !important; font-size:16px; padding:6px 8px; min-width:36px; min-height:36px; display:flex; align-items:center; justify-content:center; }
  .add-row-btn { margin-top:10px; padding:14px; font-size:14px; min-height:48px; }
  .summary-section { grid-template-columns:1fr; padding:16px 16px 20px; gap:16px; }
  .notes-area { font-size:16px !important; min-height:70px; }
  .grand-num { font-size:28px; }
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-screen">
  <div class="login-card">
    <div class="login-logo">
      <div class="login-diamond-row">
        <div class="login-d-line"></div><div class="login-d-icon"></div><div class="login-d-line login-d-line-r"></div>
      </div>
      <div class="login-company">Abdullah Hussain Hazazy<br>for Trading</div>
      <div class="login-company-ar">ÿπÿ®ÿØÿßŸÑŸÑŸá ÿ≠ÿ≥ŸäŸÜ ÿ≠ÿ≤ÿßÿ≤Ÿä ŸÑŸÑÿ™ÿ¨ÿßÿ±ÿ©</div>
      <div class="login-subtitle">Quotation System ¬∑ Sign In</div>
    </div>
    <div class="login-error" id="login-error">‚ö† Incorrect username or password</div>
    <div class="login-field-wrap"><label class="login-label">Username</label><input class="login-input" id="login-user" type="text" placeholder="Enter username" autocomplete="username"/></div>
    <div class="login-field-wrap"><label class="login-label">Password</label><input class="login-input" id="login-pass" type="password" placeholder="Enter password" autocomplete="current-password"/></div>
    <button class="login-btn" onclick="doLogin()">Sign In ‚Üí</button>
    <div class="login-footer-text">Tools &amp; Safety ¬∑ Riyadh, Saudi Arabia</div>
  </div>
</div>

<!-- APP -->
<div id="app">
<div class="page-wrapper">
  <div class="toolbar">
    <button class="btn btn-ghost" onclick="window.print()">üñ® <span class="btn-full">Print</span></button>
    <button class="btn btn-gold" id="pdf-btn" onclick="downloadPDF()">‚¨á <span class="btn-full">Download PDF</span><span class="btn-short">PDF</span></button>
    <button class="btn btn-share" id="share-btn" onclick="toggleShare(event)">‚Üó <span class="btn-full">Share</span></button>
  </div>

  <div class="card" id="quotation-card">

    <!-- HEADER -->
    <div class="doc-header">
      <div class="header-stripe"></div>
      <div class="header-inner">
        <div class="co-left">
          <div class="co-name-en">Abdullah Hussain Hazazy for Trading</div>
          <div class="co-sub-en">Tools &amp; Safety</div>
          <div class="co-detail"><span>VAT No: 300374574594500003</span><span>Alkharj Road, Riyadh</span><span>Saudi Arabia</span></div>
        </div>
        <div class="title-center">
          <div class="diamond-deco"><div class="diamond-line"></div><div class="diamond-icon"></div><div class="diamond-line right"></div></div>
          <div class="doc-title-main">QUOTATION</div>
          <div class="doc-title-ar">ÿπÿ±ÿ∂ ÿ≥ÿπÿ±</div>
        </div>
        <div class="co-right">
          <div class="co-name-ar">ÿπÿ®ÿØÿßŸÑŸÑŸá ÿ≠ÿ≥ŸäŸÜ ÿ≠ÿ≤ÿßÿ≤Ÿä ŸÑŸÑÿ™ÿ¨ÿßÿ±ÿ©</div>
          <div class="co-sub-ar">ÿßŸÑÿ£ÿØŸàÿßÿ™ ŸàÿßŸÑÿ≥ŸÑÿßŸÖÿ©</div>
          <div class="co-detail-ar"><span>ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ∂ÿ±Ÿäÿ®Ÿä: 300374574594500003</span><span>ÿ∑ÿ±ŸäŸÇ ÿßŸÑÿÆÿ±ÿ¨ÿå ÿßŸÑÿ±Ÿäÿßÿ∂</span><span>ÿßŸÑŸÖŸÖŸÑŸÉÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©</span></div>
        </div>
      </div>
    </div>

    <!-- META -->
    <div class="meta-bar">
      <div class="meta-item"><div class="meta-label">Quotation No.</div><input class="meta-value" id="qt-number" value="QT-2025-0001"/></div>
      <div class="meta-item"><div class="meta-label">Issue Date</div><input class="meta-value" type="date" id="issue-date"/></div>
      <div class="meta-item"><div class="meta-label">Valid Until</div><input class="meta-value" type="date" id="valid-date"/></div>
      <div class="meta-item"><div class="meta-label">Currency</div><input class="meta-value" id="currency-input" value="SAR" style="max-width:80px"/></div>
    </div>

    <!-- CLIENT -->
    <div class="client-section">
      <div class="client-box">
        <div class="section-label">Bill To</div>
        <input class="ef ef-lg" placeholder="Client / Company Name"/>
        <input class="ef" placeholder="Address, City, Country"/>
      </div>
      <div class="client-box">
        <div class="section-label">Project / Reference</div>
        <input class="ef ef-lg" placeholder="Project Name"/>
        <input class="ef" placeholder="Ref No. / Site / Contact Person"/>
      </div>
    </div>

    <!-- TABLE -->
    <div class="table-section">
      <div class="table-scroll">
        <table id="quote-table">
          <!-- colgroup ensures consistent column widths for print -->
          <colgroup>
            <col class="c-no">
            <col class="c-prod">
            <col class="c-desc">
            <col class="c-unit">
            <col class="c-qty">
            <col class="c-rate">
            <col class="c-amt">
            <col class="c-vat">
            <col class="c-tot">
            <col class="no-pdf" style="width:32px">
          </colgroup>
          <thead>
            <tr>
              <th style="width:36px;text-align:center;">No.</th>
              <th style="min-width:90px;">Product No.</th>
              <th style="min-width:180px;">Description</th>
              <th style="min-width:52px;">Unit</th>
              <th style="min-width:60px;">Qty</th>
              <th style="min-width:85px;">Unit Rate</th>
              <th style="min-width:85px;text-align:right;">Amount</th>
              <th style="min-width:85px;text-align:right;">VAT (15%)</th>
              <th style="min-width:90px;text-align:right;">Total</th>
              <th style="width:32px;" class="no-pdf"></th>
            </tr>
          </thead>
          <tbody id="table-body"></tbody>
        </table>
      </div>
      <button class="add-row-btn" onclick="addRow()">Ôºã Add New Item</button>
    </div>

    <!-- SUMMARY -->
    <div class="summary-section">

      <!-- Notes -->
      <div>
        <div class="notes-label">Notes &amp; Terms</div>
        <textarea class="notes-area" placeholder="Add payment terms, delivery notes, or any special conditions here..."></textarea>
      </div>

      <!-- SIGNATURE -->
      <div class="stamp-wrap">
        <svg viewBox="0 0 260 80" xmlns="http://www.w3.org/2000/svg" style="width:190px;height:60px;overflow:visible;">
          <defs>
            <filter id="f1"><feGaussianBlur stdDeviation="0.4"/></filter>
          </defs>
          <g fill="none" stroke="#1a3acc" stroke-linecap="round" stroke-linejoin="round" filter="url(#f1)">
            <!-- Main flowing stroke -->
            <path d="M10 55 C20 30, 35 10, 50 18 C62 25, 55 48, 45 56 C38 62, 28 62, 24 56" stroke-width="2.8" opacity="0.9"/>
            <!-- Connector -->
            <path d="M45 56 C58 62, 80 60, 95 52 C108 45, 112 32, 105 22" stroke-width="2.4" opacity="0.88"/>
            <!-- Second loop -->
            <path d="M105 22 C118 10, 135 12, 138 26 C141 40, 130 56, 118 64" stroke-width="2.8" opacity="0.9"/>
            <!-- Long tail sweep -->
            <path d="M118 64 C138 70, 175 68, 210 58 C232 52, 248 42, 252 30" stroke-width="2" opacity="0.80"/>
            <!-- Underline flourish -->
            <path d="M10 68 C80 76, 170 74, 252 62" stroke-width="1.2" opacity="0.35"/>
          </g>
        </svg>
        <div class="sig-label-row"><span></span><div class="sig-label-diamond"></div><span class="r"></span></div>
        <div class="sig-auth-label">Authorized Signature</div>
      </div>

      <!-- Totals -->
      <div class="totals-wrap">
        <div class="totals-label">Summary</div>
        <div class="totals-box">
          <div class="t-row"><span class="t-label">Subtotal</span><span class="t-value" id="subtotal">0.00</span></div>
          <div class="t-row"><span class="t-label">VAT <span class="vat-tag">15%</span></span><span class="t-value" id="vat-total">0.00</span></div>
          <div class="t-row grand">
            <div class="grand-left"><div class="grand-label">Grand Total</div><div class="grand-sublabel">Inclusive of 15% VAT</div></div>
            <div class="grand-right"><div class="grand-num-wrap"><span class="grand-cur">SAR</span><span class="grand-num" id="grand-total">0.00</span></div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- AMOUNT IN WORDS -->
    <div class="words-bar">
      <span class="words-bar-label">Amount in Words:</span>
      <span class="words-bar-value" id="amount-words">Zero Saudi Riyals Only</span>
    </div>

    <div style="height:1px;background:var(--border);"></div>
  </div>
</div>
</div>

<script>
  function doLogin(){
    const u=document.getElementById('login-user').value.trim();
    const p=document.getElementById('login-pass').value.trim();
    const e=document.getElementById('login-error');
    if(u==='bismi'&&p==='bismi'){
      e.classList.remove('show');
      const s=document.getElementById('login-screen');
      s.classList.add('hide');
      setTimeout(()=>{s.style.display='none';document.getElementById('app').style.display='block';},500);
    } else {
      e.classList.remove('show'); void e.offsetWidth; e.classList.add('show');
      document.getElementById('login-pass').value=''; document.getElementById('login-pass').focus();
    }
  }
  document.addEventListener('keydown',e=>{if(e.key==='Enter'&&document.getElementById('login-screen').style.display!=='none')doLogin();});

  const VAT=0.15; let rc=0;
  const today=new Date(),valid=new Date(); valid.setDate(today.getDate()+30);
  document.getElementById('issue-date').value=today.toISOString().split('T')[0];
  document.getElementById('valid-date').value=valid.toISOString().split('T')[0];

  const gc=()=>document.getElementById('currency-input').value.trim()||'SAR';
  const fmt=n=>parseFloat(n||0).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});

  function addRow(){
    rc++;
    const tr=document.createElement('tr'); tr.id=`row-${rc}`;
    tr.innerHTML=`<td class="sno">${rc}</td>
      <td><input class="ci" placeholder="PRD-001"/></td>
      <td><input class="ci" placeholder="Product description..."/></td>
      <td><input class="ci" placeholder="Pcs"/></td>
      <td><input class="ci ci-r qty" placeholder="0" type="number" min="0" step="any" oninput="calcRow(this)"/></td>
      <td><input class="ci ci-r rate" placeholder="0.00" type="number" min="0" step="any" oninput="calcRow(this)"/></td>
      <td class="amt-val" data-amount="0"><span class="row-amount">‚Äî</span></td>
      <td class="vat-val" data-vat="0"><span class="row-vat">‚Äî</span></td>
      <td class="tot-val" data-total="0"><span class="row-total">‚Äî</span></td>
      <td class="no-pdf"><button class="del-btn" onclick="deleteRow('row-${rc}')" title="Remove">‚úï</button></td>`;
    document.getElementById('table-body').appendChild(tr); updateSummary();
  }

  function calcRow(input){
    const row=input.closest('tr');
    const qty=parseFloat(row.querySelector('.qty').value)||0;
    const rate=parseFloat(row.querySelector('.rate').value)||0;
    const amount=qty*rate, vat=amount*VAT, total=amount+vat;
    row.querySelector('.row-amount').textContent=amount>0?fmt(amount):'‚Äî';
    row.querySelector('.row-vat').textContent=vat>0?fmt(vat):'‚Äî';
    row.querySelector('.row-total').textContent=total>0?fmt(total):'‚Äî';
    row.querySelector('.amt-val').dataset.amount=amount;
    row.querySelector('.vat-val').dataset.vat=vat;
    row.querySelector('.tot-val').dataset.total=total;
    updateSummary();
  }

  function deleteRow(id){
    const row=document.getElementById(id); if(!row)return;
    row.style.transition='opacity .18s,transform .18s'; row.style.opacity='0'; row.style.transform='translateX(10px)';
    setTimeout(()=>{row.remove();renumber();updateSummary();},200);
  }
  function renumber(){document.querySelectorAll('#table-body tr').forEach((r,i)=>r.querySelector('.sno').textContent=i+1);}

  function numberToWords(amount){
    const ones=['','One','Two','Three','Four','Five','Six','Seven','Eight','Nine','Ten','Eleven','Twelve','Thirteen','Fourteen','Fifteen','Sixteen','Seventeen','Eighteen','Nineteen'];
    const tens=['','','Twenty','Thirty','Forty','Fifty','Sixty','Seventy','Eighty','Ninety'];
    function b1(n){if(n===0)return '';if(n<20)return ones[n]+' ';if(n<100)return tens[Math.floor(n/10)]+(n%10?' '+ones[n%10]:'')+' ';return ones[Math.floor(n/100)]+' Hundred '+b1(n%100);}
    function cv(n){if(n===0)return 'Zero';let r='';if(n>=1000000){r+=b1(Math.floor(n/1000000))+'Million ';n%=1000000;}if(n>=1000){r+=b1(Math.floor(n/1000))+'Thousand ';n%=1000;}return(r+b1(n)).trim();}
    const riyals=Math.floor(amount),halalas=Math.round((amount-riyals)*100);
    let w=cv(riyals)+' Saudi Riyal'+(riyals!==1?'s':'');
    if(halalas>0)w+=' and '+cv(halalas)+' Halala'+(halalas!==1?'s':'');
    return w+' Only';
  }

  function updateSummary(){
    let sub=0,vsum=0;
    document.querySelectorAll('#table-body tr').forEach(r=>{
      sub+=parseFloat(r.querySelector('.amt-val')?.dataset.amount||0);
      vsum+=parseFloat(r.querySelector('.vat-val')?.dataset.vat||0);
    });
    const grand=sub+vsum,cur=gc(),f=v=>`${cur} ${fmt(v)}`;
    document.getElementById('subtotal').textContent=f(sub);
    document.getElementById('vat-total').textContent=f(vsum);
    document.getElementById('grand-total').textContent=fmt(grand);
    document.getElementById('amount-words').textContent=numberToWords(grand);
  }
  document.getElementById('currency-input').addEventListener('input',updateSummary);

  function downloadPDF() {
    const btn = document.getElementById('pdf-btn');
    btn.disabled = true;
    btn.innerHTML = '<span class="btn-spinner"></span> Generating...';

    // ‚îÄ‚îÄ Collect all live data from the form ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const qtNum    = document.getElementById('qt-number').value.trim()   || 'QT-2025-0001';
    const issDate  = document.getElementById('issue-date').value         || '';
    const valDate  = document.getElementById('valid-date').value         || '';
    const currency = document.getElementById('currency-input').value.trim() || 'SAR';

    // Client fields (first two .ef inputs in each client-box)
    const clientBoxes = document.querySelectorAll('.client-box');
    const billName    = clientBoxes[0]?.querySelectorAll('input')[0]?.value || '';
    const billAddr    = clientBoxes[0]?.querySelectorAll('input')[1]?.value || '';
    const projName    = clientBoxes[1]?.querySelectorAll('input')[0]?.value || '';
    const projRef     = clientBoxes[1]?.querySelectorAll('input')[1]?.value || '';

    // Notes
    const notes = document.querySelector('.notes-area')?.value || '';

    // Totals
    const subtotal  = document.getElementById('subtotal').textContent;
    const vatTotal  = document.getElementById('vat-total').textContent;
    const grandNum  = document.getElementById('grand-total').textContent;
    const amtWords  = document.getElementById('amount-words').textContent;

    // Table rows
    let tableRows = '';
    document.querySelectorAll('#table-body tr').forEach((tr, i) => {
      const cells = tr.querySelectorAll('input');
      const prodNo = cells[0]?.value || '';
      const desc   = cells[1]?.value || '';
      const unit   = cells[2]?.value || '';
      const qty    = cells[3]?.value || '';
      const rate   = cells[4]?.value || '';
      const amt    = tr.querySelector('.row-amount')?.textContent || '‚Äî';
      const vat    = tr.querySelector('.row-vat')?.textContent    || '‚Äî';
      const tot    = tr.querySelector('.row-total')?.textContent  || '‚Äî';
      tableRows += `<tr>
        <td class="sno">${i+1}</td>
        <td>${prodNo}</td>
        <td>${desc}</td>
        <td>${unit}</td>
        <td style="text-align:right">${qty}</td>
        <td style="text-align:right">${rate}</td>
        <td class="amt-val">${amt}</td>
        <td class="vat-val">${vat}</td>
        <td class="tot-val">${tot}</td>
      </tr>`;
    });

    // ‚îÄ‚îÄ Signature SVG (grab from DOM) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const sigSVG = document.querySelector('.stamp-wrap svg')?.outerHTML || '';

    // ‚îÄ‚îÄ Build clean static A4 HTML ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const html = `<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>${qtNum}</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  @page { size:A4 portrait; margin:8mm; }
  *{ box-sizing:border-box; margin:0; padding:0; }
  body{ font-family:'Outfit',sans-serif; font-size:9pt; color:#12213a; background:#fff; }
  /* HEADER */
  .doc-header{ background:#0b1524; color:#fff; padding:0; }
  .header-stripe{ height:3px; background:linear-gradient(90deg,transparent,#c8974a 20%,#e4b96e 50%,#c8974a 80%,transparent); }
  .header-inner{ display:grid; grid-template-columns:1fr auto 1fr; gap:10px; padding:10px 16px 8px; align-items:center; }
  .co-name-en{ font-family:'Cormorant Garamond',serif; font-size:14pt; font-weight:700; color:#e4b96e; }
  .co-sub-en{ font-family:'Cormorant Garamond',serif; font-size:9pt; font-style:italic; color:rgba(200,151,74,0.7); }
  .co-detail{ font-size:7.5pt; color:rgba(255,255,255,0.55); margin-top:2px; line-height:1.5; }
  .co-right{ text-align:right; direction:rtl; }
  .co-name-ar{ font-size:12pt; font-weight:700; color:#e4b96e; }
  .co-sub-ar{ font-size:8pt; color:rgba(200,151,74,0.65); }
  .title-center{ text-align:center; }
  .diamond-deco{ display:flex; align-items:center; justify-content:center; gap:6px; margin-bottom:3px; }
  .diamond-line{ width:24px; height:1px; background:linear-gradient(90deg,transparent,#c8974a); }
  .diamond-line.r{ background:linear-gradient(90deg,#c8974a,transparent); }
  .diamond-icon{ width:6px; height:6px; background:#c8974a; transform:rotate(45deg); }
  .doc-title-main{ font-family:'Cormorant Garamond',serif; font-size:22pt; font-weight:700; color:#fff; letter-spacing:.12em; }
  .doc-title-ar{ font-size:9pt; color:rgba(255,255,255,0.6); direction:rtl; margin-top:2px; }
  /* META */
  .meta-bar{ display:grid; grid-template-columns:repeat(4,1fr); border-bottom:1px solid #ddd5c4; background:#faf7f2; }
  .meta-item{ padding:7px 10px; border-right:1px solid #ddd5c4; }
  .meta-item:last-child{ border-right:none; }
  .meta-label{ font-size:7pt; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:#c8974a; margin-bottom:2px; }
  .meta-value{ font-size:9.5pt; font-weight:500; color:#12213a; }
  /* CLIENT */
  .client-section{ display:grid; grid-template-columns:1fr 1fr; border-bottom:1px solid #ddd5c4; }
  .client-box{ padding:7px 14px; border-right:1px solid #ddd5c4; }
  .client-box:last-child{ border-right:none; }
  .section-label{ font-size:7pt; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:#c8974a; margin-bottom:5px; display:flex; align-items:center; gap:5px; }
  .section-label::before{ content:''; display:inline-block; width:12px; height:2px; background:#c8974a; border-radius:2px; }
  .ef-lg{ font-size:10.5pt; font-weight:600; color:#12213a; margin-bottom:2px; }
  .ef{ font-size:9pt; color:#3a4f6e; }
  /* TABLE */
  .table-wrap{ padding:10px 12px 8px; }
  table{ width:100%; border-collapse:collapse; font-size:8.5pt; table-layout:fixed; border:1px solid #ddd5c4; border-radius:6px; overflow:hidden; }
  thead tr{ background:#1f2f48; }
  thead th{ padding:6px 5px; font-size:7pt; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:rgba(255,255,255,0.8); text-align:left; white-space:normal; word-break:break-word; line-height:1.2; }
  thead th:first-child{ color:#e4b96e; text-align:center; }
  thead th:nth-child(7),thead th:nth-child(8),thead th:nth-child(9){ text-align:right; }
  tbody tr{ border-bottom:1px solid #ddd5c4; }
  tbody tr:last-child{ border-bottom:none; }
  tbody tr:nth-child(even){ background:#faf7f2; }
  tbody td{ padding:6px 5px; vertical-align:middle; font-size:8.5pt; color:#12213a; word-break:break-word; }
  .sno{ text-align:center; font-weight:700; color:#c8974a; width:4%; }
  col.c-prod{ width:11%; }
  col.c-desc{ width:28%; }
  col.c-unit{ width:6%; }
  col.c-qty{ width:7%; }
  col.c-rate{ width:11%; }
  col.c-amt{ width:11%; }
  col.c-vat{ width:11%; }
  col.c-tot{ width:11%; }
  .amt-val{ text-align:right; color:#3a4f6e; font-weight:500; }
  .vat-val{ text-align:right; color:#6b82a0; font-weight:500; }
  .tot-val{ text-align:right; color:#2e7d5e; font-weight:700; }
  /* SUMMARY */
  .summary-section{ display:grid; grid-template-columns:1fr auto 260px; gap:14px; padding:12px 14px 14px; border-top:1px solid #ddd5c4; background:#faf7f2; align-items:start; }
  .notes-label,.totals-label{ font-size:7pt; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:#c8974a; margin-bottom:6px; display:flex; align-items:center; gap:5px; }
  .notes-label::before,.totals-label::before{ content:''; display:inline-block; width:12px; height:2px; background:#c8974a; border-radius:2px; }
  .notes-text{ font-size:8.5pt; color:#3a4f6e; border:1px solid #ddd5c4; border-radius:6px; padding:8px 10px; background:#fff; min-height:60px; white-space:pre-wrap; line-height:1.5; }
  .totals-box{ border:1px solid #ddd5c4; border-radius:6px; overflow:hidden; background:#fff; }
  .t-row{ display:flex; justify-content:space-between; padding:8px 12px; border-bottom:1px solid #ddd5c4; font-size:9.5pt; }
  .t-row:last-child{ border-bottom:none; }
  .t-label{ color:#6b82a0; }
  .t-value{ font-weight:600; }
  .vat-tag{ background:rgba(200,151,74,0.15); color:#c8974a; font-size:7pt; font-weight:700; padding:1px 5px; border-radius:10px; margin-left:4px; }
  .t-row.grand{ background:linear-gradient(135deg,#0b1524,#162035); padding:12px 14px; position:relative; display:flex; justify-content:space-between; align-items:center; }
  .t-row.grand::before{ content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,transparent,#c8974a,transparent); }
  .grand-label{ font-size:8pt; font-weight:700; color:rgba(255,255,255,0.9); text-transform:uppercase; letter-spacing:.1em; }
  .grand-sublabel{ font-size:7pt; color:rgba(255,255,255,0.35); }
  .grand-num-wrap{ display:flex; align-items:flex-end; gap:4px; }
  .grand-cur{ font-size:8pt; font-weight:500; color:rgba(200,151,74,0.7); padding-bottom:3px; }
  .grand-num{ font-size:20pt; font-weight:700; color:#e4b96e; letter-spacing:.02em; line-height:1; }
  /* STAMP AREA */
  .stamp-wrap{ display:flex; flex-direction:column; align-items:center; gap:4px; padding-top:2px; }
  .sig-label-row{ display:flex; align-items:center; gap:5px; width:180px; margin-top:5px; }
  .sig-label-row span{ flex:1; height:1px; background:linear-gradient(90deg,transparent,#ddd5c4); }
  .sig-label-row span.r{ background:linear-gradient(90deg,#ddd5c4,transparent); }
  .sig-diamond{ width:5px; height:5px; background:#c8974a; transform:rotate(45deg); flex-shrink:0; }
  .sig-auth-label{ font-size:7.5pt; color:#6b82a0; letter-spacing:.1em; text-transform:uppercase; font-weight:700; text-align:center; margin-top:3px; }
  /* WORDS BAR */
  .words-bar{ display:flex; align-items:baseline; gap:8px; padding:6px 14px; background:#faf7f2; border-top:1px solid #ddd5c4; border-bottom:1px solid #ddd5c4; }
  .words-bar-label{ font-size:7.5pt; font-weight:700; text-transform:uppercase; letter-spacing:.1em; color:#c8974a; white-space:nowrap; }
  .words-bar-value{ font-size:10pt; color:#12213a; font-style:italic; font-weight:500; }
</style>
</head>
<body>
<div class="doc-header">
  <div class="header-stripe"></div>
  <div class="header-inner">
    <div class="co-left">
      <div class="co-name-en">Abdullah Hussain Hazazy for Trading</div>
      <div class="co-sub-en">Tools &amp; Safety</div>
      <div class="co-detail">VAT No: 300374574594500003<br>Alkharj Road, Riyadh<br>Saudi Arabia</div>
    </div>
    <div class="title-center">
      <div class="diamond-deco"><div class="diamond-line"></div><div class="diamond-icon"></div><div class="diamond-line r"></div></div>
      <div class="doc-title-main">QUOTATION</div>
      <div class="doc-title-ar">ÿπÿ±ÿ∂ ÿ≥ÿπÿ±</div>
    </div>
    <div class="co-right">
      <div class="co-name-ar">ÿπÿ®ÿØÿßŸÑŸÑŸá ÿ≠ÿ≥ŸäŸÜ ÿ≠ÿ≤ÿßÿ≤Ÿä ŸÑŸÑÿ™ÿ¨ÿßÿ±ÿ©</div>
      <div class="co-sub-ar">ÿßŸÑÿ£ÿØŸàÿßÿ™ ŸàÿßŸÑÿ≥ŸÑÿßŸÖÿ©</div>
      <div class="co-detail" style="direction:rtl">ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ∂ÿ±Ÿäÿ®Ÿä: 300374574594500003<br>ÿ∑ÿ±ŸäŸÇ ÿßŸÑÿÆÿ±ÿ¨ÿå ÿßŸÑÿ±Ÿäÿßÿ∂<br>ÿßŸÑŸÖŸÖŸÑŸÉÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑÿ≥ÿπŸàÿØŸäÿ©</div>
    </div>
  </div>
</div>
<div class="meta-bar">
  <div class="meta-item"><div class="meta-label">Quotation No.</div><div class="meta-value">${qtNum}</div></div>
  <div class="meta-item"><div class="meta-label">Issue Date</div><div class="meta-value">${issDate}</div></div>
  <div class="meta-item"><div class="meta-label">Valid Until</div><div class="meta-value">${valDate}</div></div>
  <div class="meta-item"><div class="meta-label">Currency</div><div class="meta-value">${currency}</div></div>
</div>
<div class="client-section">
  <div class="client-box">
    <div class="section-label">Bill To</div>
    <div class="ef-lg">${billName}</div>
    <div class="ef">${billAddr}</div>
  </div>
  <div class="client-box">
    <div class="section-label">Project / Reference</div>
    <div class="ef-lg">${projName}</div>
    <div class="ef">${projRef}</div>
  </div>
</div>
<div class="table-wrap">
  <table>
    <colgroup>
      <col style="width:4%"><col class="c-prod"><col class="c-desc">
      <col class="c-unit"><col class="c-qty"><col class="c-rate">
      <col class="c-amt"><col class="c-vat"><col class="c-tot">
    </colgroup>
    <thead>
      <tr>
        <th>No.</th><th>Product No.</th><th>Description</th>
        <th>Unit</th><th>Qty</th><th>Unit Rate</th>
        <th style="text-align:right">Amount</th>
        <th style="text-align:right">VAT (15%)</th>
        <th style="text-align:right">Total</th>
      </tr>
    </thead>
    <tbody>${tableRows}</tbody>
  </table>
</div>
<div class="summary-section">
  <div>
    <div class="notes-label">Notes &amp; Terms</div>
    <div class="notes-text">${notes}</div>
  </div>
  <div class="stamp-wrap">
    ${sigSVG}
    <div class="sig-label-row"><span></span><div class="sig-diamond"></div><span class="r"></span></div>
    <div class="sig-auth-label">Authorized Signature</div>
  </div>
  <div>
    <div class="totals-label">Summary</div>
    <div class="totals-box">
      <div class="t-row"><span class="t-label">Subtotal</span><span class="t-value">${subtotal}</span></div>
      <div class="t-row"><span class="t-label">VAT <span class="vat-tag">15%</span></span><span class="t-value">${vatTotal}</span></div>
      <div class="t-row grand">
        <div><div class="grand-label">Grand Total</div><div class="grand-sublabel">Inclusive of 15% VAT</div></div>
        <div class="grand-num-wrap"><span class="grand-cur">${currency}</span><span class="grand-num">${grandNum}</span></div>
      </div>
    </div>
  </div>
</div>
<div class="words-bar">
  <span class="words-bar-label">Amount in Words:</span>
  <span class="words-bar-value">${amtWords}</span>
</div>
<script>window.onload=()=>{window.print();}<\/script>
</body></html>`;

    // ‚îÄ‚îÄ Open & print ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const win = window.open('', '_blank');
    if (!win) {
      alert('Please allow pop-ups for this page, then try again.');
      btn.disabled = false;
      btn.innerHTML = '‚¨á <span class="btn-full">Download PDF</span><span class="btn-short">PDF</span>';
      return;
    }
    win.document.write(html);
    win.document.close();
    btn.disabled = false;
    btn.innerHTML = '‚¨á <span class="btn-full">Download PDF</span><span class="btn-short">PDF</span>';
  }



  // ‚îÄ‚îÄ SHARE LOGIC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  // Attach menu directly to <body> so it escapes every stacking context
  (function() {
    var items = [
      { fn:"whatsapp", icon:"üí¨", bg:"#dcf8c6", label:"WhatsApp",      sub:"Send as message"   },
      { fn:"email",    icon:"‚úâÔ∏è",  bg:"#ddeeff", label:"Email",         sub:"Open mail client"  },
      { fn:"sms",      icon:"üì±", bg:"#e8e0ff", label:"SMS / Messages", sub:"Send via text"     },
      { fn:"copy",     icon:"üìã", bg:"#fff3e0", label:"Copy Summary",   sub:"Copy to clipboard" }
    ];
    if (navigator.share) {
      items.push({ fn:"native", icon:"‚ãØ", bg:"#f0f0f0", label:"More options‚Ä¶", sub:"System share sheet" });
    }
    var html = '<div class="share-menu-header">Share Quotation via</div>';
    items.forEach(function(it) {
      html += '<button class="share-item" onclick="shareVia(\'' + it.fn + '\')">'
            + '<span class="share-icon" style="background:' + it.bg + '">' + it.icon + '</span>'
            + '<span class="share-item-label"><span>' + it.label + '</span>'
            + '<span class="share-item-sub">' + it.sub + '</span></span>'
            + '</button>';
    });
    html += '<div class="share-copied" id="share-copied">‚úì Copied to clipboard!</div>';
    var menu = document.createElement('div');
    menu.id = 'share-menu-global';
    menu.innerHTML = html;
    document.body.appendChild(menu);
  })();

  document.addEventListener('click', function(e) {
    var menu = document.getElementById('share-menu-global');
    var btn  = document.getElementById('share-btn');
    if (!menu || !btn) return;
    if (!menu.contains(e.target) && !btn.contains(e.target)) {
      menu.classList.remove('open');
    }
  });

  function toggleShare(e) {
    e.preventDefault();
    e.stopPropagation();
    var menu = document.getElementById('share-menu-global');
    var btn  = document.getElementById('share-btn');
    if (!menu || !btn) return;
    var rect   = btn.getBoundingClientRect();
    var isOpen = menu.classList.contains('open');
    var menuW  = 224;
    var left   = rect.right - menuW;
    if (left < 8) left = 8;
    menu.style.top   = (rect.bottom + window.scrollY + 8) + 'px';
    menu.style.left  = left + 'px';
    menu.style.position = 'absolute';
    menu.classList.remove('open');
    if (!isOpen) {
      requestAnimationFrame(function() {
        requestAnimationFrame(function() {
          menu.classList.add('open');
        });
      });
    }
  }
  function closeShare() {
    var m = document.getElementById('share-menu-global');
    if (m) m.classList.remove('open');
  }

  function buildShareText() {
    const qtNum   = document.getElementById('qt-number').value || 'Quotation';
    const issDate = document.getElementById('issue-date').value || '';
    const cur     = document.getElementById('currency-input').value || 'SAR';
    const grand   = document.getElementById('grand-total').textContent;
    const words   = document.getElementById('amount-words').textContent;
    const client  = document.querySelector('.client-box input')?.value || '';

    let rows = '';
    document.querySelectorAll('#table-body tr').forEach((tr, i) => {
      const inputs = tr.querySelectorAll('input');
      const desc = inputs[1]?.value; const qty = inputs[3]?.value; const rate = inputs[4]?.value;
      const tot  = tr.querySelector('.row-total')?.textContent;
      if (desc || qty) rows += `  ${i+1}. ${desc || '‚Äî'} | Qty: ${qty||0} | Total: ${tot||'‚Äî'}
`;
    });

    return `*QUOTATION ‚Äî ${qtNum}*
Date: ${issDate}
Client: ${client}

*Items:*
${rows}
*Grand Total: ${cur} ${grand}*
${words}`;
  }

  function shareVia(type) {
    const text = buildShareText();
    const qtNum = document.getElementById('qt-number').value || 'Quotation';
    const subject = encodeURIComponent(`Quotation ${qtNum}`);

    if (type === 'whatsapp') {
      window.open('https://wa.me/?text=' + encodeURIComponent(text), '_blank');
    } else if (type === 'email') {
      const body = encodeURIComponent(text.replace(/\*/g,''));
      window.location.href = `mailto:?subject=${subject}&body=${body}`;
    } else if (type === 'sms') {
      window.location.href = 'sms:?body=' + encodeURIComponent(text.replace(/\*/g,''));
    } else if (type === 'copy') {
      navigator.clipboard.writeText(text.replace(/\*/g,'')).then(() => {
        const el = document.getElementById('share-copied');
        el.classList.add('show');
        setTimeout(() => { el.classList.remove('show'); closeShare(); }, 2000);
      }).catch(() => {
        const ta = document.createElement('textarea');
        ta.value = text.replace(/\*/g,''); document.body.appendChild(ta);
        ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
        const el = document.getElementById('share-copied');
        el.classList.add('show');
        setTimeout(() => { el.classList.remove('show'); closeShare(); }, 2000);
      });
      return;
    } else if (type === 'native') {
      navigator.share({ title: `Quotation ${qtNum}`, text: text.replace(/\*/g,'') }).catch(()=>{});
    }
    closeShare();
  }

  addRow(); addRow(); addRow();
</script>
</body>
</html>
